<div class="contenedor">
  <h1>Lista de Fichas por Médico</h1>

  <!-- Filtros -->
  <div class="filtros">
    <label>
      Fecha:
      <input
        type="date"
        [(ngModel)]="fechaSeleccionada"
        (ngModelChange)="onFechaChange($event)"
      />
    </label>

    <label>
      Médico:
      <select
        [(ngModel)]="medicoSeleccionado"
        (ngModelChange)="onMedicoChange($event)"
      >
        <option value="" disabled selected>Seleccione médico</option>
        <option *ngFor="let medico of medicos" [value]="medico.Medico">
          {{ medico.Medico }}
        </option>
      </select>
    </label>

    <label>
      Turno:
      <select
        [(ngModel)]="turnoSeleccionado"
        (ngModelChange)="onTurnoChange($event)"
      >
        <option value="" disabled selected>Seleccione turno</option>
        <option *ngFor="let turno of turnos" [value]="turno.Turno">
          {{ turno.Turno }}
        </option>
      </select>
    </label>

    <div class="acciones-filtros">
      <button (click)="cargarFichas()">Buscar todas las fichas</button>
    </div>
  </div>

  <!-- Tabla -->
  <table *ngIf="fichas.length > 0">
    <thead>
      <tr>
        <th>N° Ficha</th>
        <th>Ticket</th>
        <th>Periodo</th>
        <th>Paciente</th>
        <th>Especialidad</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let ficha of fichas">
        <td>{{ ficha.Ficha }}</td>
        <td>{{ ficha.Ticket }}</td>
        <td>{{ ficha.Periodo }}</td>
        <td>{{ ficha.paciente }}</td>
        <td>{{ ficha.Especialidad }}</td>
        <td>{{ ficha.EstadoFicha }}</td>
      </tr>
    </tbody>
  </table>

  <p *ngIf="fichas.length === 0">
    No hay fichas para la fecha, médico o turno seleccionados.
  </p>
</div>

<!-- Acciones tabla -->
<div class="acciones-tabla">
  <button (click)="cancelarPaciente()">Cancelar Ficha</button>
  <button (click)="llamarSiguiente()">Llamar Ficha</button>
  <button (click)="atenderPaciente()">Ficha Atendida</button>
  <button (click)="reiniciarEstado()">Reiniciar Atención</button>
</div>
